
= form_for(@event, html: {class: 'form-horizontal'}) do |f|
  - if @event.errors.any?
    #error_explanation
      %h2
        = pluralize(@event.errors.count, "error")
        prohibited this event from being saved:
      %ul
      - @event.errors.full_messages.each do |message|
        %li= message

  %h3 General Information
  %br
  .form-group
    = f.label :start_date, class: 'control-label col-sm-2'
    .col-sm-6
      = f.datetime_select :start_date
  .form-group
    = f.label :title, class: 'control-label col-sm-2'
    .col-sm-6
      = f.text_field :title, class: 'form-control'
  .form-group
    = f.label :description, class: 'control-label col-sm-2'
    .col-sm-6
      = f.text_area :description, class: 'form-control'
  .form-group
    = f.label :image, class: 'control-label col-sm-2'
    .col-sm-6
      = f.file_field :image, class: 'form-control'
  %br

  %h3 Payments &amp; Fees
  %br
  .col-sm-8
    .btn-group
      %button.btn.pricing-free{type:'button', onclick:"formatPricingFeatures(false);"} Free
      %button.btn.pricing-priced{type:'button', onclick:"formatPricingFeatures(true);"} Priced
    &nbsp; Choose to make your event free to customers or to charge for tickets.
    %p
    .jumbotron#payments-jumbo.text-center
      = image_tag 'stripe_logo.png', style: 'margin: auto; height: 75px;'
      %i.fa.fa-2x.fa-cc-visa
      %i.fa.fa-2x.fa-cc-mastercard
      %i.fa.fa-2x.fa-cc-amex
      %i.fa.fa-2x.fa-cc-discover
      %p
      .small.pricing-free
        %strong Free events can skip this section!
      .small
        You can connect an existing Stripe account or easily create a new one. Click below to connect and activate event pricing.
      %p
      %br
      %a.btn.btn-info.connect-stripe{href: stripe_connect_path}
        %strong Connect with Stripe

  .clearfix
  %h3 Tickets &amp; Pricing
  %table.table.table-striped#ticket-matrix
    %thead
      %tr
        %th Tier
        %th Tier name
        %th Description
        %th # of tickets
        %th $ / ticket
        %th Total $ / tier
        %th
    %tfoot
      %tr
        %td.tiers{colspan: 2}
        %td
        %td.tickets
        %td
        %td
          %pre.totals
        %td
    %tbody
      %tr
        %td
          %pre.tier 0
        %td= text_field_tag :tier_name, nil, placeholder: "ex. VIP, General Admission", class: 'form-control'
        %td= text_area_tag :tier_description, nil, placeholder: "(optional)", class: 'form-control', rows: 2, cols: 25
        %td= number_field_tag :tier_tickets, 0, in: 0..5000, step: 1, size: 4, class: 'form-control form-control-inline affects-total tier-ticket'
        %td
          .input-group
            %span.input-group-addon.input-group-addon-inline $
            = number_field_tag :tier_price_dollars, 0, in: 0..9999, size: 4, class: 'form-control form-control-inline affects-total tier-price'
            %span.input-group-addon.input-group-addon-inline .00
        %td
          %pre.tier-total $0.00
        %td.action-col{style: 'text-align: center;'}
          %a{onclick: 'addTierRow()', role: 'button', class: 'btn btn-info', tabindex: 1}
            %i.fa.fa-plus

  %br
  .actions
    = f.submit class: 'btn btn-primary'
